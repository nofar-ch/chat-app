(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{106:function(e,t,a){e.exports=a.p+"static/media/edit.66a43e3e.png"},107:function(e,t,a){e.exports=a.p+"static/media/messenger.cf3b5c0d.png"},108:function(e,t){e.exports="data:image/png;base64,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"},123:function(e,t,a){e.exports=a(172)},170:function(e,t,a){},172:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(14),o=a.n(s);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(57),c=a(50),u=a(7),l=a.n(u),p=a(13),m=a(15),d=a(11),h=a(23),g=a(24),f=a(25),b=a(22),w=function(e){return{main:Object(b.a)({width:"auto",display:"block",marginLeft:3*e.spacing(),marginRight:3*e.spacing()},e.breakpoints.up(400+3*e.spacing()*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing(),display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing(),"px ").concat(3*e.spacing(),"px ").concat(3*e.spacing(),"px")},form:{width:"100%",marginTop:e.spacing()},submit:{marginTop:3*e.spacing()},noAccountHeader:{width:"100%"},signUpLink:{width:"100%",textDecoration:"none",color:"#303f9f",fontWeight:"bolder"},errorText:{color:"red",textAlign:"center"}}},x=a(200),E=a(212),v=a(201),N=a(199),C=a(47),k=a.n(C),y=a(197),S=a(78),O=a(202),j=a(45),T=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).submitLogIn=function(){var t=Object(p.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,j.auth().signInWithEmailAndPassword(e.state.email,e.state.password).then((function(){e.props.history.push("/")}),(function(t){e.setState({loginError:"Server error"})}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.userTyping=function(t,a){if(a.target.value){var n=a.target.value;switch(t){case"email":e.setState({email:n});break;case"password":e.setState({password:n})}}},e.state={email:null,password:null,loginError:null},e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("main",{className:t.main},r.a.createElement(y.a,null),r.a.createElement(N.a,{className:t.paper},r.a.createElement(S.a,{component:"h1",variant:"h4"},"Log In!",r.a.createElement("img",{src:"https://img.icons8.com/cotton/64/000000/login-rounded-right--v1.png",style:{width:30,marginLeft:10}})),r.a.createElement("form",{className:t.form,onSubmit:function(t){return e.submitLogIn(t)}},r.a.createElement(x.a,{required:!0,fullWidth:!0,margin:"normal"},r.a.createElement(E.a,{htmlFor:"login-email-input"},"Enter your email"),r.a.createElement(v.a,{autoComplete:"email",autoFocus:!0,id:"login-email-input",onChange:function(t){return e.userTyping("email",t)}})),r.a.createElement(x.a,{required:!0,fullWidth:!0,margin:"normal"},r.a.createElement(E.a,{htmlFor:"login-password-input"},"Enter your password"),r.a.createElement(v.a,{type:"password",id:"login-password-input",onChange:function(t){return e.userTyping("password",t)}})),r.a.createElement(O.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Log In")),this.state.loginError?r.a.createElement(S.a,{className:t.errorText,component:"h5",variant:"h6"},"Incorrect Login Information"):null,r.a.createElement("br",null),r.a.createElement(S.a,{component:"h6",variant:"h6",className:t.noAccountHeader},"Don't Have An Account?"),r.a.createElement(i.b,{className:t.signUpLink,to:"/signup"},"Sign Up!")))}}]),t}(r.a.Component),G=k()(w)(T),F=function(e){return{main:Object(b.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit},noAccountHeader:{width:"100%"},hasAccountHeader:{width:"100%"},signUpLink:{width:"100%",textDecoration:"none",color:"#303f9f",fontWeight:"bolder"},logInLink:{width:"100%",textDecoration:"none",color:"#303f9f",fontWeight:"bolder"},errorText:{color:"red",textAlign:"center",fontWeight:"bold"}}},A=a(106),M=a.n(A),D=a(45),I=a(45),U=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).submitSignUp=function(t){if(t.preventDefault(),e.passwordIsConform()){if(e.state.password.length<6)return void e.setState({signupError:"Password should be at least 6 characters"});I.auth().createUserWithEmailAndPassword(e.state.email,e.state.password).then((function(t){var a={email:t.user.email,userName:e.state.userName};Object(D.firestore)().collection("users").doc(e.state.email).set(a).then((function(){e.props.history.push("/")}),(function(t){e.setState({signupError:"Failed to add user"})}))}),(function(t){e.setState({signupError:"Failed to add user"})}))}else e.setState({signupError:"password not match"})},e.userTyping=function(t,a){if(a.target.value){var n=a.target.value;switch(t){case"userName":e.setState({userName:n});break;case"email":e.setState({email:n});break;case"password":e.setState({password:n});break;case"password-conformation":e.setState({passwordConf:n})}}},e.passwordIsConform=function(){return e.state.password===e.state.passwordConf},e.state={userName:null,email:null,password:null,passwordConf:null,signupError:""},e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("main",{className:t.main},r.a.createElement(y.a,null),r.a.createElement(N.a,{className:t.paper},r.a.createElement(S.a,{component:"h1",variant:"h4"},"Sign Up!",r.a.createElement("img",{src:M.a,style:{width:30,marginLeft:20}})),r.a.createElement("form",{onSubmit:function(t){return e.submitSignUp(t)},className:t.form},r.a.createElement(x.a,{required:!0,fullWidth:!0,margin:"normal"},r.a.createElement(E.a,{htmlFor:"signup-name-input"},"Enter your name"),r.a.createElement(v.a,{type:"text",autoFocus:!0,id:"signup-name-input",onChange:function(t){return e.userTyping("userName",t)}})),r.a.createElement(x.a,{required:!0,fullWidth:!0,margin:"normal"},r.a.createElement(E.a,{htmlFor:"signup-email-input"},"Enter your email"),r.a.createElement(v.a,{autoComplete:"email",onChange:function(t){return e.userTyping("email",t)},id:"signup-email-input"})),r.a.createElement(x.a,{required:!0,fullWidth:!0,margin:"normal"},r.a.createElement(E.a,{htmlFor:"signup-password-input"},"Create your password"),r.a.createElement(v.a,{type:"password",id:"signup-password-input",onChange:function(t){return e.userTyping("password",t)}})),r.a.createElement(x.a,{required:!0,fullWidth:!0,margin:"normal"},r.a.createElement(E.a,{htmlFor:"signup-password-conformation-input"},"Confirm your password"),r.a.createElement(v.a,{type:"password",id:"signup-password-conformation-input",onChange:function(t){return e.userTyping("password-conformation",t)}})),r.a.createElement(O.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Submit")),this.state.signupError?r.a.createElement(S.a,{className:t.errorText,component:"h5",variant:"h6"},this.state.signupError):null,r.a.createElement("br",null),r.a.createElement(S.a,{component:"h5",variant:"h6",className:t.hasAccountHeader},"Already has an account"),r.a.createElement(i.b,{className:t.logInLink,to:"/login"},"Log In!"),"    "))}}]),t}(r.a.Component),R=k()(F)(U),L=a(203),B=function(e){return{root:{backgroundColor:e.palette.background.paper,height:"98%",position:"absolute",left:"0",width:"20%",boxShadow:"0px 0px 2px black",overflow:"auto"},listItem:{cursor:"pointer"},newChatBtn:{borderRadius:"1px",border:"1px solid"},createGroupBtn:{borderRadius:"1px",border:"1px solid"},unreadMessage:{width:"30px",position:"absolute",top:"0",right:"5px"},purple:{color:e.palette.getContrastText(L.a[500]),backgroundColor:L.a[500]},img:{width:"10%",marginLeft:"2%"},icons:{marginLeft:"4%"}}},W=a(204),z=a(205),V=a(206),K=a(213),Q=a(207),H=a(208),P=a(209),q=a(107),J=a.n(q),Y=a(108),Z=a.n(Y),X=a(110),$=a.n(X),_=a(109),ee=a.n(_),te=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).newChat=function(){e.props.newChatBtnFn()},e.selectChat=function(t){e.props.selectedChatFn(t)},e.userIsSender=function(t){return t.messages[t.messages.length-1].sender===e.props.userEmail},e.newGroup=function(){e.props.newGroupBtnFn()},e.state={isRead:!1},e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.chats,s=t.userName;return void 0!=n?r.a.createElement("div",null,r.a.createElement("main",{className:a.root},r.a.createElement("h2",null,"Hello ",this.props.userName,"!"),r.a.createElement("h1",null,"Start To Chat!",r.a.createElement("img",{src:J.a,className:a.img})),r.a.createElement(O.a,{variant:"contained",fullWidth:!0,color:"primary",className:a.newChatBtn,onClick:this.newChat},"New Message ",r.a.createElement(ee.a,{className:a.icons})),r.a.createElement(O.a,{variant:"contained",fullWidth:!0,color:"primary",className:a.createGroupBtn,onClick:this.newGroup},"New Group",r.a.createElement($.a,{className:a.icons})),n.length>0?r.a.createElement(W.a,null,n.map((function(t,n){return r.a.createElement("div",{key:n},r.a.createElement(z.a,{className:a.listItem,onClick:function(){return e.selectChat(n)},selected:e.props.selectedChatIndex===n,alignItems:"flex-start"},r.a.createElement(V.a,null,r.a.createElement(K.a,{className:a.purple,alt:"Remi Sharp"},"private"===t.type?t.usersNames.filter((function(e){return e!==s}))[0].split("")[0]:t.nameOfGroup.split("")[0])),r.a.createElement(Q.a,{primary:"private"===t.type?t.usersNames.filter((function(e){return e!==s}))[0]:t.nameOfGroup,secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{component:"span",color:"textPrimary"},t.messages[t.messages.length-1].message.substring(0,30)))}),void 0!==t.receiverHasRead&&!t.receiverHasRead&&!e.userIsSender(t)||void 0!==t.userIsRead&&t.userIsRead.filter((function(t){return t===e.props.userEmail})).length<=0&&!e.userIsSender(t)?r.a.createElement(H.a,null,r.a.createElement("img",{className:a.unreadMessage,src:Z.a})):null),r.a.createElement(P.a,null))}))):null)):r.a.createElement("main",{className:a.root},r.a.createElement(O.a,{variant:"contained",fullWidth:!0,color:"primary",className:a.newChatBtn,onClick:this.newChat},"New Message"),r.a.createElement(W.a,null))}}]),t}(r.a.Component),ae=k()(B)(te),ne=function(e){return{signOutBtn:{position:"absolute",bottom:"0px",left:"0px",width:"20%",borderRadius:"0px",backgroundColor:"#227092",height:"35px",boxShadow:"0px 0px 2px black",color:"white"},mainContainer:{position:"relative",height:"100vh"}}},re=a(5),se=function(e){return{mainContainerChatView:{position:"relative",width:"80%",float:"right",height:"calc(100vh - 70px)"},content:{position:"absulote",height:"calc(100% - 50px)",overflow:"auto",padding:"2%",boxSizing:"border-box",top:"50px",width:"100%"},userSent:{float:"left",clear:"both",padding:"2%",boxSizing:"border-box",wordWrap:"break-word",marginTop:"2%",backgroundColor:"#ADD8E6",color:"black",width:"20%",borderRadius:"10px"},friendSent:{float:"right",clear:"both",padding:"2%",boxSizing:"border-box",wordWrap:"break-word",marginTop:"2%",backgroundColor:"#E6E6FA",color:"black",width:"20%",borderRadius:"10px"},chatHeader:{position:"absulote",width:"100%",height:"50px",backgroundColor:"#344195",right:"0",top:"2px",fontSize:"18px",textAlign:"center",color:"white",paddingTop:"10px",boxSizing:"border-box"},timestamp:{fontSize:"10px",textAlign:"right"},senderName:{color:"blue",fontSize:"10px",float:"left"},btn:{position:"absolute",left:"1%",textAlign:"center"}}},oe=a(111),ie=a.n(oe),ce=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).componentDidUpdate=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,document.getElementById("chatView-container");case 2:(t=e.sent)&&t.scrollTo(0,t.scrollHeight);case 4:case"end":return e.stop()}}),e)}))),a.deleteChat=function(){a.props.deleteChatFn()},a.showGroupList=function(){a.props.showGroupListFn()},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.chat,s=t.userEmail;return void 0===n?r.a.createElement("main",null):r.a.createElement("div",{className:a.mainContainerChatView},r.a.createElement("div",{className:a.chatHeader},"private"===n.type?r.a.createElement("div",null,r.a.createElement("div",{className:a.btn},r.a.createElement(O.a,{variant:"contained",color:"default",size:"small",startIcon:r.a.createElement(ie.a,null),onClick:function(){return e.deleteChat()}},"delete ")),"You are chatting with ",n.usersNames.filter((function(t){return t!==e.props.userName}))[0]):r.a.createElement("div",null,r.a.createElement("div",{className:a.btn},r.a.createElement(O.a,{variant:"contained",color:"default",size:"small",onClick:function(){return e.showGroupList()},style:{padding:"3px"}},"friends list")),"You are chatting with ",n.nameOfGroup)),r.a.createElement("main",{id:"chatView-container",className:a.content},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),n.messages.map((function(e,t){return r.a.createElement("div",{key:t,className:e.sender===s?a.userSent:a.friendSent},e.sender!==s?r.a.createElement("div",{className:a.senderName},e.senderName):null,r.a.createElement("div",{className:a.timestamp},e.timestamp),e.message)}))))}}]),t}(r.a.Component),ue=Object(re.a)(se)(ce),le=function(e){return{sendBtn:{color:"blue",cursor:"pointer","&:hover":{color:"gray"}},chatTextBoxContainer:{position:"absolute",bottom:"2px",height:"65px",left:"20%",boxSizing:"border-box",width:"80%"},chatTextBox:{width:"95%"},emojiButton:{cssFloat:"right",border:"none",margin:0,cursor:"pointer"},emojiMenu:{position:"absolute",right:0,bottom:"20px"}}},pe=a(210),me=a(114),de=a.n(me),he=(a(168),a(116)),ge=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).userTyping=function(t){13===t.keyCode?e.submitMessage():e.setState({chatText:t.target.value})},e.messageValid=function(e){return e&&e.replace(/\s/g,"").length},e.typingFocus=function(){e.props.MessageReadFn()},e.submitMessage=function(){e.messageValid(e.state.chatText)&&(e.props.submitMessageFn(e.state.chatText),document.getElementById("chatTextBox").value=""),e.setState({showEmojisMenu:!1})},e.addEmoji=function(t){var a=t.native;e.setState({chatText:e.state.chatText+a}),document.getElementById("chatTextBox").value=document.getElementById("chatTextBox").value+a},e.showEmojisMenu=function(){e.setState({showEmojisMenu:!0},(function(){return document.addEventListener("click",(function(t){return e.closeEmojisMenu(t)}))}))},e.closeEmojisMenu=function(t){var a=document.getElementById("chatTextBox");null!==a&&a.contains(t.target)&&e.setState({showEmojisMenu:!1})},e.state={chatText:"",showEmojisMenu:!1},e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",null,r.a.createElement("div",{className:t.chatTextBoxContainer},r.a.createElement("div",{className:t.textField},r.a.createElement(pe.a,{placeholder:"Typing your message...",onKeyUp:function(t){return e.userTyping(t)},id:"chatTextBox",className:t.chatTextBox,onFocus:this.typingFocus}),r.a.createElement(de.a,{className:t.sendBtn,onClick:this.submitMessage}),r.a.createElement("p",{className:t.emojiButton,onClick:function(t){return e.showEmojisMenu(t)}},String.fromCodePoint(128522)))),this.state.showEmojisMenu?r.a.createElement("span",{className:t.emojiMenu},r.a.createElement(he.a,{id:"emojisMenu",onSelect:this.addEmoji,emojiTooltip:!0})):null)}}]),t}(r.a.Component),fe=k()(le)(ge),be=function(e){return{main:Object(b.a)({width:"auto",display:"block",marginLeft:3*e.spacing(),marginRight:3*e.spacing()},e.breakpoints.up(400+3*e.spacing()*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{padding:"".concat(2*e.spacing(),"px ").concat(3*e.spacing(),"px ").concat(3*e.spacing(),"px"),position:"absolute",width:"350px",top:"50px",left:"calc(50% + 150px - 175px)"},input:{},form:{width:"100%",marginTop:e.spacing()},submit:{marginTop:3*e.spacing()},errorText:{color:"red",textAlign:"center"}}},we=a(45),xe=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).submitNewChat=function(){var t=Object(p.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,e.userExist();case 3:if(!t.sent){t.next=11;break}return t.next=7,e.chatExist();case 7:t.sent?e.goToChat():e.createChat(),t.next=12;break;case 11:e.setState({error:!0});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.sendDetailsNewChat=function(t){e.props.createNewChatFn({sendTo:e.state.userEmail,message:e.state.message,sendToName:t})},e.createChat=Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,we.firestore().collection("users").doc(e.state.userEmail);case 2:t.sent.get().then((function(t){t.exists&&e.sendDetailsNewChat(t.data().userName)}));case 4:case"end":return t.stop()}}),t)}))),e.goToChat=function(){e.props.goToChatFn(e.buildDocKey(),e.state.message)},e.buildDocKey=function(){return[we.auth().currentUser.email,e.state.userEmail].sort().join(":")},e.chatExist=Object(p.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.buildDocKey();case 2:return a=t.sent,t.next=5,we.firestore().collection("chats").doc(a).get();case 5:return n=t.sent,t.abrupt("return",n.exists);case 7:case"end":return t.stop()}}),t)}))),e.userExist=Object(p.a)(l.a.mark((function t(){var a,n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,we.firestore().collection("users").get();case 2:return a=t.sent,n=a.docs.map((function(e){return e.data().email})).includes(e.state.userEmail),r=n&&e.state.userEmail!==we.auth().currentUser.email,t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)}))),e.state={userEmail:null,message:null,error:!1,sendToName:null},e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"userTyping",value:function(e,t){switch(e){case"userEmail":this.setState({userEmail:t.target.value});break;case"message":this.setState({message:t.target.value})}}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("main",{className:t.main},r.a.createElement(y.a,null),r.a.createElement(N.a,{className:t.paper},r.a.createElement(S.a,{component:"h1",variant:"h5"},"Send A Message!"),r.a.createElement("form",{className:t.form,onSubmit:function(t){return e.submitNewChat(t)}},r.a.createElement(x.a,{fullWidth:!0},r.a.createElement(E.a,{htmlform:"new-chat-user-email"},"Enter Your Friends Email"),r.a.createElement(v.a,{id:"new-chat-user-email",required:!0,className:t.input,autoFocus:!0,onChange:function(t){return e.userTyping("userEmail",t)}})),r.a.createElement(x.a,{fullWidth:!0},r.a.createElement(E.a,{htmlform:"enter-your-message"},"Enter Your Message"),r.a.createElement(v.a,{id:"enter-your-message",required:!0,className:t.input,onChange:function(t){return e.userTyping("message",t)}})),r.a.createElement("br",null),this.state.error?r.a.createElement("div",{className:t.errorText},"this user does not exist"):null,r.a.createElement(O.a,{type:"submit",fullWidth:!0,className:t.submit,variant:"contained",color:"primary"},"Submit"))))}}]),t}(r.a.Component),Ee=Object(re.a)(be)(xe),ve=a(39),Ne=function(e){return{main:Object(b.a)({width:"auto",display:"block",marginLeft:3*e.spacing(),marginRight:3*e.spacing()},e.breakpoints.up(400+3*e.spacing()*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{padding:"".concat(2*e.spacing(),"px ").concat(3*e.spacing(),"px ").concat(3*e.spacing(),"px"),position:"absolute",width:"350px",top:"50px",left:"calc(50% + 150px - 175px)"},input:{},form:{width:"100%",marginTop:e.spacing()},submit:{marginTop:3*e.spacing()},errorText:{color:"red",textAlign:"center"},userList:{overflow:"auto",height:"300px"}}},Ce=a(211),ke=a(75),ye=a.n(ke),Se=a(45),Oe=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).componentDidMount=Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({manager:e.props.userEmail}),t.next=3,Se.auth().onAuthStateChanged(function(){var t=Object(p.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Se.firestore().collection("users").onSnapshot(function(){var t=Object(p.a)(l.a.mark((function t(n){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=n.docs.map((function(t,n){if(t.data().email!==a.email)return r.a.createElement("div",{key:n},r.a.createElement(Ce.a,{onChange:function(a){return e.marked(a,t.data().email)},inputProps:{"aria-label":"primary checkbox"}}),t.data().email)})),e.setState({friends:s});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)}))),e.marked=function(t,a){if(t.target.checked){var n=e.state.users;n.push(a),e.setState({users:n})}else{var r=e.state.users;r=r.filter((function(e){return e!==a})),e.setState({users:r})}},e.userTyping=function(t){e.setState({nameOfGroup:t.target.value})},e.submitNewGroup=function(t){t.preventDefault();var a=Object(ve.a)(e);Se.firestore().collection("chats").doc(e.state.nameOfGroup).get().then((function(e){console.log(e),e.exists?a.nameError():a.sendData()})).catch((function(e){console.log("Error getting document:",e)}))},e.nameError=function(){console.log("error"),e.setState({errorExistName:!0})},e.sendData=function(){var t=e.state.users;t.push(e.state.manager),e.setState({users:t});var a={nameOfGroup:e.state.nameOfGroup,manager:e.state.manager,users:e.state.users};e.props.createNewGroupFn(a)},e.state={nameOfGroup:null,manager:null,friends:[],users:[],errorExistName:!1},e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("main",{className:t.main},r.a.createElement(y.a,null),r.a.createElement(N.a,{className:t.paper},r.a.createElement(S.a,{component:"h1",variant:"h5"},"Create A New Group! ",r.a.createElement(ye.a,{style:{width:"35"}})),r.a.createElement("form",{className:t.form,onSubmit:function(t){return e.submitNewGroup(t)}},r.a.createElement(x.a,{fullWidth:!0},r.a.createElement(E.a,{htmlform:"name-of-group"},"Name Of The Group"),r.a.createElement(v.a,{id:"name-of-group",required:!0,className:t.input,autoFocus:!0,onChange:function(t){return e.userTyping(t)}})),r.a.createElement("div",{className:t.userList},this.state.friends),r.a.createElement(O.a,{type:"submit",fullWidth:!0,className:t.submit,variant:"contained",color:"primary"},"Add Group!")),this.state.errorExistName?r.a.createElement("div",{className:t.errorText},"this name already exist"):null))}}]),t}(r.a.Component),je=Object(re.a)(Ne)(Oe),Te=function(e){return{main:Object(b.a)({width:"auto",display:"block",marginLeft:3*e.spacing(),marginRight:3*e.spacing()},e.breakpoints.up(400+3*e.spacing()*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{padding:"".concat(2*e.spacing(),"px ").concat(2*e.spacing(),"px ").concat(2*e.spacing(),"px"),position:"absolute",width:"400px",top:"50px",left:"calc(50% + 150px - 175px)"},form:{width:"100%",marginTop:e.spacing()},submit:{marginTop:3*e.spacing()},errorText:{color:"red",textAlign:"center"},ol:{marginTop:0,boxSizing:"border-box",overflow:"auto",height:"195px"},li:{padding:"10px 8px 10px 30px",background:"#eee",fontSize:"14px",transition:"0.2s"},liManager:{background:"#D3D3D3",fontSize:"14px",transition:"0.2s",padding:"10px 8px 10px 30px"},delete:{float:"right",cursor:"pointer"},btnAddUser:{cursor:"pointer",position:"absolute",right:"5px",top:"5px",width:"80",backgroundColor:"white",color:"black",border:"2px solid #008CBA"},btnExitGroup:{position:"absolute",right:"0",bottom:"0",backgroundColor:"#008CBA",color:"white",border:"1px solid #008CBA",padding:"6px 18px"}}},Ge=a(88),Fe=a.n(Ge),Ae=function(e){return{popup:{position:"fixed",width:"100%",height:"100%",top:"0",left:"0",right:"0",bottom:"0",margin:"auto",backgroundColor:"rgba(0,0,0, 0.5)"},popupInner:{position:"absolute",left:"25%",right:"25%",top:"25%",bottom:"25%",margin:"auto",borderRadius:"20px",background:"white"}}},Me=Object(re.a)(Ae)((function(e){var t=e.text,a=e.userToDelete,n=e.yesToDeleteFn,s=e.NoToDeleteFn;return r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"popupInner"},r.a.createElement("h3",{style:{color:"SeaGreen"}},t+": "+a,"?"),r.a.createElement("button",{onClick:function(e){return n(e)}},"Yes"),r.a.createElement("button",{onClick:s},"No")))})),De=function(e){return{popup:{position:"fixed",width:"100%",height:"100%",top:"0",left:"0",right:"0",bottom:"0",margin:"auto",backgroundColor:"rgba(0,0,0, 0.5)"},popupInner:{position:"absolute",left:"25%",right:"25%",top:"25%",bottom:"25%",margin:"auto",borderRadius:"20px",background:"white",overflow:"auto"},iconSelect:{cursor:"pointer",position:"absolute",right:"10px"},newManagerSelected:{cursor:"pointer",position:"absolute",right:"10px",color:"green"}}},Ie=a(87),Ue=a.n(Ie),Re=Object(re.a)(De)((function(e){var t=e.classes,a=e.text,n=e.users,s=e.currentManager,o=e.newManager,i=e.newManagerSelectedFn,c=e.doneNewManagerSelectedFn;return r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"popupInner"},r.a.createElement("h3",{style:{color:"SeaGreen"}},a),r.a.createElement("ol",null,n.filter((function(e){return e!=s})).map((function(e,a){return r.a.createElement("li",{key:a},e,o!==e?r.a.createElement(Ue.a,{className:t.iconSelect,onClick:function(t){return i(t,e)}}):r.a.createElement(Ue.a,{className:t.newManagerSelected}))}))),r.a.createElement("button",{onClick:function(e){return c(e)}},"Done")))})),Le=function(e){return{popup:{position:"fixed",width:"100%",height:"100%",top:"0",left:"0",right:"0",bottom:"0",margin:"auto",backgroundColor:"rgba(0,0,0, 0.5)"},popupInner:{position:"absolute",left:"25%",right:"25%",top:"25%",bottom:"25%",margin:"auto",borderRadius:"20px",background:"white",overflow:"auto"},iconAddThisUser:{cursor:"pointer",position:"absolute",right:"5px"},userList:{position:"relative",width:"100%",overflow:"auto",height:"150px"},li:{padding:"8px",margin:"8px",backgroundColor:"#E6E6FA"}}},Be=a(115),We=a.n(Be),ze=Object(re.a)(Le)((function(e){var t=e.classes,a=e.chat,n=e.users,s=e.addThisUserFn;return r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"popupInner"},r.a.createElement("h2",{style:{color:"SeaGreen"}},"Add Users"),r.a.createElement("div",{className:t.userList},r.a.createElement("ol",null,n.map((function(e,n){if(!a.users.includes(e.email))return r.a.createElement("li",{key:n,className:t.li},e.email,r.a.createElement(We.a,{className:t.iconAddThisUser,onClick:function(t){return s(t,e.email)}}))}))))))})),Ve=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).deleteUser=function(t,a){e.setState({popupDeleteUser:!0,userToDelete:a,popupReplaceManager:!1,popupAddUser:!1})},e.yesToDelete=function(t){t.preventDefault(),e.setState({popupDeleteUser:!1}),e.props.delelteUserFromGroupListFn(e.state.userToDelete)},e.noToDelete=function(){e.setState({popupDeleteUser:!1})},e.replaceManager=function(){e.setState({popupReplaceManager:!0,popupDeleteUser:!1,popupAddUser:!1,newManager:null})},e.newManagerSelected=function(t,a){e.setState({newManager:a})},e.doneNewManagerSelected=function(t){t.preventDefault(),e.props.doneReplaceManangerFn(e.state.newManager)},e.addUser=function(t){t.preventDefault(),e.setState({popupAddUser:!0,popupReplaceManager:!1,popupDeleteUser:!1})},e.addThisUser=function(t,a){e.props.addUserToGroupFn(a)},e.exitGroup=function(){e.props.exitGroupFn()},e.state={popupDeleteUser:!1,popupReplaceManager:!1,popupAddUser:!1,userToDelete:null,newManager:null},e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.chat,s=t.userEmail,o=t.users;if(null===n||void 0===n)return r.a.createElement("div",null);var i=n.manager,c=n.users.sort().map((function(t,n){return r.a.createElement("div",{key:n},s!==i&&t!==i?r.a.createElement("li",{className:a.li},t):s!==i&&t===i?r.a.createElement("li",{className:a.li},t," - Manager"):s===i&&t!==i?r.a.createElement("li",{className:a.li},t,r.a.createElement(Fe.a,{className:a.delete,onClick:function(a){return e.deleteUser(a,t)}})," "):r.a.createElement("li",{className:a.liManager},i," - Manager",r.a.createElement(Fe.a,{className:a.delete,onClick:function(t){return e.replaceManager(t,i)}})))}));return r.a.createElement("main",{className:a.main},r.a.createElement(y.a,null),r.a.createElement(N.a,{className:a.paper},r.a.createElement(S.a,{component:"h1",variant:"h5"},"Group List of ",n.nameOfGroup,r.a.createElement(ye.a,{style:{width:"35"}})),r.a.createElement("form",{className:a.form,onSubmit:function(t){return e.submitNewGroup(t)}},r.a.createElement(x.a,{fullWidth:!0}),s===i?r.a.createElement("button",{className:a.btnAddUser,onClick:function(t){return e.addUser(t)}},"Add Users"):null,r.a.createElement("ol",{className:a.ol},c),this.state.popupDeleteUser?r.a.createElement(Me,{text:"Are you sure to delete",userToDelete:this.state.userToDelete,yesToDeleteFn:function(t){return e.yesToDelete(t)},NoToDeleteFn:this.noToDelete}):null,this.state.popupReplaceManager?r.a.createElement(Re,{text:"Please select another manager",users:n.users,newManagerSelectedFn:function(t,a){return e.newManagerSelected(t,a)},doneNewManagerSelectedFn:function(t){return e.doneNewManagerSelected(t)},newManager:this.state.newManager,currentManager:i}):null,this.state.popupAddUser?r.a.createElement(ze,{chat:n,users:o,addThisUserFn:function(t,a){return e.addThisUser(t,a)}}):null),i!==s?r.a.createElement("button",{className:a.btnExitGroup,onClick:this.exitGroup},"Exit this group"):null))}}]),t}(r.a.Component),Ke=Object(re.a)(Te)(Ve),Qe=a(45),He=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(h.a)(this,Object(g.a)(t).call(this))).componentDidMount=function(){Qe.auth().onAuthStateChanged(function(){var t=Object(p.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=5;break}console.log("no user"),e.props.history.push("/login"),t.next=10;break;case 5:return n=Qe.firestore(),t.next=8,n.collection("chats").where("users","array-contains",a.email).onSnapshot((function(t){var n=t.docs.map((function(e){return e.data()}));e.setState({email:a.email,chats:n})}));case 8:return t.next=10,n.collection("users").onSnapshot((function(t){var n=t.docs.map((function(e){return e.data()})).filter((function(e){return e.email===a.email})),r=t.docs.map((function(e){return e.data()}));e.setState({userName:n[0].userName,users:r})}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},e.selectedChat=function(t){e.setState({selectedChatIndex:t,newChatFormVisible:!1,newGroupFormVisible:!1,showGroupList:!1},(function(){return e.MessageRead()}))},e.newChatBtnClicked=function(){e.setState({newChatFormVisible:!0,selectedChatIndex:null,newGroupFormVisible:!1})},e.newGroupBtnClicked=function(){e.setState({newGroupFormVisible:!0})},e.signOut=function(){return Qe.auth().signOut()},e.clickedCheckWhereNotSender=function(t){var a=e.state.chats[t].messages.length-1;return e.state.chats[t].messages[a].sender!==e.state.email},e.MessageRead=Object(p.a)(l.a.mark((function t(){var a,n,r,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state.selectedChatIndex,n=e.state.chats[a].users.filter((function(t){return t!==e.state.email})),!e.clickedCheckWhereNotSender(e.state.selectedChatIndex)){t.next=12;break}if("private"!==e.state.chats[a].type){t.next=9;break}return r=e.buildDocKey(n[0]),t.next=7,Qe.firestore().collection("chats").doc(r).update({receiverHasRead:!0});case 7:t.next=12;break;case 9:return s=e.state.chats[a].nameOfGroup,t.next=12,Qe.firestore().collection("chats").doc(s).update({userIsRead:Qe.firestore.FieldValue.arrayUnion(e.state.email)});case 12:case"end":return t.stop()}}),t)}))),e.submitMessage=function(){var t=Object(p.a)(l.a.mark((function t(a){var n,r,s,o,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.chats[e.state.selectedChatIndex].users.filter((function(t){return t!==e.state.email})),r=new Date,s=r.getHours()+":"+r.getMinutes()+"     "+r.getDate()+"/"+(r.getMonth()+1),"private"!==e.state.chats[e.state.selectedChatIndex].type){t.next=9;break}return o=e.buildDocKey(n[0]),t.next=7,Qe.firestore().collection("chats").doc(o).update({messages:Qe.firestore.FieldValue.arrayUnion({sender:e.state.email,message:a,timestamp:s}),receiverHasRead:!1});case 7:t.next=12;break;case 9:return i=e.state.chats[e.state.selectedChatIndex].nameOfGroup,t.next=12,Qe.firestore().collection("chats").doc(i).update({messages:Qe.firestore.FieldValue.arrayUnion({sender:e.state.email,senderName:e.state.userName,message:a,timestamp:s}),userIsRead:[]});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.buildDocKey=function(t){return[e.state.email,t].sort().join(":")},e.createNewChat=function(){var t=Object(p.a)(l.a.mark((function t(a){var n,r,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Date,r=n.getHours()+":"+n.getMinutes()+"     "+n.getDate()+"/"+(n.getMonth()+1),s=e.buildDocKey(a.sendTo),console.log(s),t.next=6,Qe.firestore().collection("chats").doc(s).set({type:"private",receiverHasRead:!1,users:[e.state.email,a.sendTo],usersNames:[e.state.userName,a.sendToName],messages:[{message:a.message,sender:e.state.email,timestamp:r}]});case 6:e.setState({newChatFormVisible:!1}),e.selectedChat(e.state.chats.length-1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.goToChat=function(t,a){var n=t.split(":"),r=e.state.chats.find((function(e){return n.every((function(t){return e.users.includes(t)}))}));e.setState({newChatFormVisible:!1});var s=e.state.chats.indexOf(r);e.selectedChat(s),e.submitMessage(a)},e.createNewGroup=function(){var t=Object(p.a)(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Date,r=n.getHours()+":"+n.getMinutes()+"     "+n.getDate()+"/"+(n.getMonth()+1),t.next=4,Qe.firestore().collection("chats").doc(a.nameOfGroup).set({type:"group",nameOfGroup:a.nameOfGroup,manager:a.manager,users:a.users,messages:[{sender:a.manager,senderName:e.state.userName,timestamp:r,message:"welcome!"}]});case 4:e.setState({newGroupFormVisible:!1}),e.selectedChat(e.state.chats.length-1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.deleteChat=Object(p.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.buildDocKey(e.state.chats[e.state.selectedChatIndex].users.filter((function(t){return t!=e.state.email}))),t.next=3,Qe.firestore().collection("chats").doc(a).delete();case 3:case"end":return t.stop()}}),t)}))),e.showGroupList=function(){e.state.showGroupList||e.setState({showGroupList:!0})},e.delelteUserFromGroupList=function(){var t=Object(p.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.chats[e.state.selectedChatIndex].users.filter((function(e){return e!==a})),t.next=3,Qe.firestore().collection("chats").doc(e.state.chats[e.state.selectedChatIndex].nameOfGroup).update({users:n});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.doneReplaceMananger=function(){var t=Object(p.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.chats[e.state.selectedChatIndex].nameOfGroup,t.next=3,Qe.firestore().collection("chats").doc(n).update({manager:a});case 3:e.setState({showGroupList:!1});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addUserToGroup=function(){var t=Object(p.a)(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.chats[e.state.selectedChatIndex].nameOfGroup,(r=e.state.chats[e.state.selectedChatIndex].users).push(a),t.next=5,Qe.firestore().collection("chats").doc(n).update({users:r});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.exitGroup=Object(p.a)(l.a.mark((function t(){var a,n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({showGroupList:!1}),a=e.state.chats[e.state.selectedChatIndex].nameOfGroup,n=e.state.chats[e.state.selectedChatIndex].users,r=n.filter((function(t){return t!=e.state.email})),t.next=6,Qe.firestore().collection("chats").doc(a).update({users:r});case 6:e.setState({showGroupList:!1});case 7:case"end":return t.stop()}}),t)}))),e.state={selectedChatIndex:null,newChatFormVisible:!1,newGroupFormVisible:!1,email:null,userName:null,chats:[],showGroupList:!1,users:null},e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.mainContainer},r.a.createElement(ae,{history:this.props.history,newChatBtnFn:this.newChatBtnClicked,newGroupBtnFn:this.newGroupBtnClicked,selectedChatFn:this.selectedChat,chats:this.state.chats,userEmail:this.state.email,userName:this.state.userName,selectedChatIndex:this.state.selectedChatIndex}),this.state.newChatFormVisible||this.state.newGroupFormVisible?null:r.a.createElement(ue,{userEmail:this.state.email,chat:this.state.chats[this.state.selectedChatIndex],chatIndex:this.state.selectedChatIndex,userName:this.state.userName,deleteChatFn:this.deleteChat,showGroupListFn:this.showGroupList}),null===this.state.selectedChatIndex||this.state.newChatFormVisible?null:r.a.createElement(fe,{submitMessageFn:this.submitMessage,MessageReadFn:this.MessageRead}),this.state.newChatFormVisible?r.a.createElement(Ee,{createNewChatFn:this.createNewChat,goToChatFn:this.goToChat}):null,this.state.newGroupFormVisible?r.a.createElement(je,{userEmail:this.state.email,createNewGroupFn:this.createNewGroup}):null,this.state.showGroupList?r.a.createElement(Ke,{chat:this.state.chats[this.state.selectedChatIndex],userEmail:this.state.email,users:this.state.users,delelteUserFromGroupListFn:this.delelteUserFromGroupList,doneReplaceManangerFn:this.doneReplaceMananger,addUserToGroupFn:this.addUserToGroup,exitGroupFn:this.exitGroup}):null,r.a.createElement(O.a,{className:e.signOutBtn,onClick:this.signOut},"Sign Out"))}}]),t}(r.a.Component),Pe=Object(re.a)(ne)(He),qe=(a(170),a(45));a(171),qe.initializeApp({apiKey:"AIzaSyCkX9Dt5LmOCzhBg7y6Guv6JgN7unr-uOc",authDomain:"chatapp-b9036.firebaseapp.com",databaseURL:"https://chatapp-b9036.firebaseio.com",projectId:"chatapp-b9036",storageBucket:"chatapp-b9036.appspot.com",messagingSenderId:"422721356006",appId:"1:422721356006:web:799f5a13fc6adcef197b27",measurementId:"G-JZLN897R23"}),o.a.render(r.a.createElement(i.a,{basename:"/chat-app"},r.a.createElement("div",{id:"routing-container"},r.a.createElement(c.c,null,r.a.createElement(c.a,{exact:!0,path:"/",component:Pe}),r.a.createElement(c.a,{path:"/login",component:G}),r.a.createElement(c.a,{path:"/signup",component:R})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[123,1,2]]]);
//# sourceMappingURL=main.2773e954.chunk.js.map